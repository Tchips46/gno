package evm

import (
	"encoding/binary"
	"gno.land/p/demo/uint256"
)

// for `gno run`
func main() {
	caller := Caller{
		Gas: 2000,
	}

	// function a() public pure returns(uint8) {
    //     return 84;
    // }
	res, err := caller.Call(nil, 1000, "a()", "6080604052348015600f57600080fd5b506004361060285760003560e01c80630dbe671f14602d575b600080fd5b60336047565b604051603e9190606a565b60405180910390f35b60006054905090565b600060ff82169050919050565b6064816050565b82525050565b6000602082019050607d6000830184605d565b9291505056fea2646970667358221220368126a6b73d43aa76aadbfe86261dc0527ac2037fbd80bdcd4bee7210eef92e64736f6c634300081b0033")
	if err != nil {
		println(err)
		return
	}
	println(binary.BigEndian.Uint64(res[len(res)-8:len(res)]), caller.Gas)

	// function succ(uint256 n) public pure returns(uint256) {
    //     return n + 1;
    // }
	res, err = caller.Call(nil, 1000, "succ(uint256)", "608060405234801561001057600080fd5b506004361061002b5760003560e01c8063b6bb186414610030575b600080fd5b61004a600480360381019061004591906100b1565b610060565b60405161005791906100ed565b60405180910390f35b600060018261006f9190610137565b9050919050565b600080fd5b6000819050919050565b61008e8161007b565b811461009957600080fd5b50565b6000813590506100ab81610085565b92915050565b6000602082840312156100c7576100c6610076565b5b60006100d58482850161009c565b91505092915050565b6100e78161007b565b82525050565b600060208201905061010260008301846100de565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006101428261007b565b915061014d8361007b565b925082820190508082111561016557610164610108565b5b9291505056fea264697066735822122009693ddc60eb08f1b3bc77e7fc3f3c589f87b9a9356271abaf69b9c84162550164736f6c634300081b0033",
		uint256.NewUint(42),
	)
	if err != nil {
		println(err)
		return
	}
	println(binary.BigEndian.Uint64(res[len(res)-8:len(res)]), caller.Gas)
}
